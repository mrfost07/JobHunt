{
  "name": "JobHunt",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        32,
        0
      ],
      "id": "6af5c227-2b34-4759-bf56-3e881b66b8db",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "https://drive.google.com/file/d/1D0JfDKe9-mJU-Ace4J5DALFJBejVz1Su/view?usp=sharing",
          "mode": "url"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        208,
        0
      ],
      "id": "191c2ccd-acfe-4692-9ced-63a65584007a",
      "name": "Download file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "YAJiIZ8h9TukXVRZ",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1.1,
      "position": [
        416,
        0
      ],
      "id": "11525587-fd11-44bb-9312-ade2fffc3e75",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.text }}",
        "options": {
          "systemMessage": "=You will receieve text extracted from a pdf resume. Extract all the important information typically found in resume, including:\n\n- Full name and contact (phone, email, portfolio, address if availbale)\n- Professional summary or objective\n- Work Experience (Job titles, company name (or freelance), location, dates, and key responsibilties, achievements if available)\n- Language (English & Tagalog/Filipino)\n- Education Background (degree, expected graduate)\n- Skills (Technical skills that are listed there, Frontend, Backend, Database, Cloud & DevOps, and soft skills if available)\n- Certificates & Awards (if available)\n- Additional relevant information (Projects, or others if available)\n\nOrganize the extracted information clearly with descriptive headings and simple lists. Format the output for easy readability amd processing by another AI, avoid unnecessary formatting or escape characters\n---------"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        624,
        0
      ],
      "id": "47718d7c-9ba5-4d2e-938a-b6157379fa3f",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": "mistral-small-latest",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
      "typeVersion": 1,
      "position": [
        624,
        160
      ],
      "id": "e911f66e-e79c-47db-a000-2acd7ecdf23a",
      "name": "Mistral Cloud Chat Model",
      "credentials": {
        "mistralCloudApi": {
          "id": "dcFlASdzHKWzUend",
          "name": "Mistral Cloud account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5a076fd6-5ecc-4192-b095-9358c7f38c42",
              "name": "expected_salary",
              "value": 100000,
              "type": "number"
            },
            {
              "id": "291b6fdf-dd6f-47ec-b8cb-e3ac17c0cd07",
              "name": "resume",
              "value": "={{ $json.output }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        912,
        0
      ],
      "id": "5067a786-07ce-47e1-aa4f-cd99507f712f",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "url": "https://api.openwebninja.com/jsearch/search",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "query",
              "value": "Software Engineer"
            },
            {
              "name": "num_pages",
              "value": "10"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-api-key",
              "value": "ak_vdu379gvnn9rm9ei61i7nxlctjk4pn7sel92y7m7335zh2w"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1072,
        0
      ],
      "id": "641797b6-8ef1-40c0-bd34-1389e86a6e55",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1344,
        0
      ],
      "id": "e599c89e-e7db-4509-b2a4-f4bd15c08aa0",
      "name": "Split Out"
    },
    {
      "parameters": {
        "maxItems": 30
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        1360,
        224
      ],
      "id": "4727d808-d89a-4801-b599-7758b4d24ea4",
      "name": "Limit"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        48,
        480
      ],
      "id": "0ffd6d9e-af8b-4b78-b418-160688670fd0",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=You are a Strict Recruitment Logic Engine. Your ONLY task is to return a valid JSON object based on a hard mathematical salary check and a conservative skill assessment.\n\n### INPUT DATA\n1. **Candidate Resume:**\n{{ $('Edit Fields').item.json.resume }}\n\n2. **Candidate Minimum Salary Floor (USD):**\n{{ $('Edit Fields').item.json.expected_salary }}\n\n3. **Job Listing (JSON):**\n{{ JSON.stringify($json) }}\n\n---\n\n### STEP 1: DATA NORMALIZATION (The \"Hierarchy of Truth\")\n\n**Goal:** Derive a single clean integer called `JOB_CEILING`.\n\n**Priority 1: CHECK CLEAN JSON FIELDS (Crucial)**\nLook at the input JSON fields `job_max_salary` and `job_min_salary`.\n- **IF** `job_max_salary` is a number greater than 0:\n  - Set `JOB_CEILING` = `job_max_salary`.\n  - **STOP.** Do not look at the text description. Use this number.\n- **ELSE IF** `job_min_salary` is a number greater than 0:\n  - Set `JOB_CEILING` = `job_min_salary`.\n  - **STOP.**\n- **ELSE:** Proceed to Priority 2.\n\n**Priority 2: PARSE TEXT (Only if Priority 1 failed)**\nLook at the `salary` text field (e.g., \"Pay Range $87,100.00 - $157,450.00\").\n1. **Sanitize:** Remove ALL of the following characters: `$`, `,`, `USD`, `Pay Range`.\n   - Example: \"$157,450.00\" becomes \"157450.00\".\n2. **Handle Decimals:** Round down or remove decimal places.\n   - Example: \"157450.00\" becomes \"157450\".\n3. **Handle \"k\":** Replace \"k\" with \"000\".\n4. **Identify Max:** Pick the highest remaining number.\n5. **Handle Hourly:** If the text contained \"/hr\" or \"hourly\", multiply the number by 2080.\n\n**RESULT:** You now have a clean integer `JOB_CEILING`.\n(If no data found, `JOB_CEILING` = 0).\n\n---\n\n### STEP 2: THE MATH COMPARISON\n\n**Variables:**\n- `MIN_FLOOR` = Candidate's Expected Salary (Clean Integer).\n- `JOB_CEILING` = Result from Step 1.\n\n**The Strict Logic Rules:**\n- **PASS:** If `JOB_CEILING` >= `MIN_FLOOR`.\n- **PASS:** If `JOB_CEILING` is within 5% of `MIN_FLOOR`.\n- **FAIL:** If `JOB_CEILING` < `MIN_FLOOR`.\n- **FAIL:** If `JOB_CEILING` == 0.\n\n** SANITY CHECK (Read this):**\n- 157450 is GREATER than 100000. Result: **PASS**.\n- 224000 is GREATER than 100000. Result: **PASS**.\n- Do NOT output \"Salary is below floor\" if the number is mathematically higher.\n\n---\n\n### STEP 3: CONSERVATIVE SKILL SCORING (Only if Step 2 Passes)\n\n**Instruction:** Act as a strict hiring manager. Do not be generous. Scores should reflect reality.\n\n- **10 (Unicorn):** \n  - Salary Matches.\n  - Candidate has **EXACT** Tech Stack (e.g., Job wants Java/Spring, Candidate has Java/Spring).\n  - Candidate has **EXACT** Years of Experience (or more).\n  - Candidate has **RELEVANT** Domain Knowledge (e.g., Defense, Finance, Healthcare).\n  \n- **8-9 (Strong Fit):**\n  - Salary Matches.\n  - Candidate has all **Core Technical Skills**.\n  - Missing only minor \"Nice-to-have\" tools.\n  - Domain match is good but not perfect.\n\n- **6-7 (Capable but Gaps):**\n  - Salary Matches.\n  - Candidate fits the general role (e.g., Software Engineer) but uses a different stack (e.g., Job wants React, Candidate knows Angular).\n  - OR Candidate is slightly junior for the role.\n\n- **1-5 (Weak Match):**\n  - Salary Matches.\n  - Candidate lacks core technical requirements (e.g., Python dev applying for Embedded C++ role).\n  - OR Candidate is significantly over/under qualified.\n\n- **0 (Automatic Fail):** \n  - Salary Logic Failed (Step 2 was FAIL).\n\n---\n\n### ðŸ“ EXTRACTION RULES\n1.  **job_description:** Summarize in <100 words.\n2.  **responsibilities / qualifications:** Format: \"Point 1;\\nPoint 2;\\nPoint 3\".\n3.  **apply_link:** Extract `apply_options`. Format HTML `<a href='{link}'>{publisher}</a>`. Join with `;\\n`. Max 4.\n4.  **remote:** \"Yes\" or \"No\".\n5.  **salary:** Extract original text string. If empty, print the `job_min_salary` - `job_max_salary` range.\n6.  **match_reason:**\n    - If Score 0: \"Job max salary ($[JOB_CEILING]) is below candidate floor ($[MIN_FLOOR]).\"\n    - If Score > 0: \"Salary fits ($[JOB_CEILING]). [Strict assessment of skill gaps or fit].\"\n    - If Score is below 6 or 7 because of some skill requirements and other qualifications needed, mention each skills in the match_reason that the candidate is lacking or needs to learn.\n\n---\n\n### FINAL OUTPUT JSON\nReturn ONLY this single JSON object.\n\n{\n  \"job_title\": \"\",\n  \"job_description\": \"\",\n  \"company\": \"\",\n  \"employment_type\": \"\",\n  \"remote\": \"\",\n  \"salary\": \"\",\n  \"benefits\": \"\",\n  \"responsibilities\": \"\",\n  \"qualifications\": \"\",\n  \"apply_link\": \"\",\n  \"match_score\": 0,\n  \"match_reason\": \"\"\n}"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        224,
        688
      ],
      "id": "4bec5e9c-16e8-4396-bd68-2fe4d25f9110",
      "name": "Job Matcher"
    },
    {
      "parameters": {
        "model": "mistral-small-latest",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
      "typeVersion": 1,
      "position": [
        224,
        864
      ],
      "id": "df47d192-b4ba-4542-91ea-e306b60eff7e",
      "name": "Mistral Cloud Chat Model1",
      "credentials": {
        "mistralCloudApi": {
          "id": "dcFlASdzHKWzUend",
          "name": "Mistral Cloud account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "={\n  \"job_title\": \"\",\n  \"job_description\": \"\",\n  \"company\": \"\",\n  \"employment_type\": \"\",\n  \"remote\": \"\",\n  \"salary\": \"\",\n  \"benefits\": \"\",\n  \"responsibilities\": \"\",\n  \"qualifications\": \"\",\n  \"apply_link\": \"\",\n  \"match_score\": 0,\n  \"match_reason\": \"\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        368,
        880
      ],
      "id": "8ba7cd6a-e658-40df-8b6b-1a243d884fbb",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        576,
        880
      ],
      "id": "3bdc538e-1384-4646-814a-49660a6a640b",
      "name": "Wait",
      "webhookId": "e84429da-220a-4c36-9d02-3eca39a856c2"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        352,
        480
      ],
      "id": "9db642a2-6a2f-4ff8-8217-258f40653f28",
      "name": "Merge"
    },
    {
      "parameters": {
        "batchSize": 10,
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        592,
        480
      ],
      "id": "9d6f0c4b-5fb5-44bd-a3a0-6bf8ff7fbbea",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d76a97c0-eb6b-4126-94d3-7e6cf4fcfdff",
              "leftValue": "={{ $json.output.match_score }}",
              "rightValue": 7,
              "operator": {
                "type": "number",
                "operation": "gte"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        848,
        576
      ],
      "id": "27fdfa73-8fa1-4609-a62c-c414e328ea0d",
      "name": "If match score >= 7"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1120,
        464
      ],
      "id": "e092f000-29d7-4512-8a7c-0343af5c4cc9",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ JSON.stringify($json.data) }}",
        "options": {
          "systemMessage": "=You are a precise data-to-HTML conversion AI. Your ONLY goal is to convert job listing JSON data into a strictly formatted HTML email body.\n\nYou must exhibit DETERMINISTIC behavior:\n1. ALWAYS output the exact same HTML structure for the same input.\n2. DO NOT hallucinate, summarize, rephrase, or shorten text.\n3. DO NOT use placeholders. The input is guaranteed to have all values; render them exactly as they are.\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nGLOBAL OUTPUT RULES (STRICT)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Output ONLY raw HTML string. No markdown.\nâ€¢ Use INLINE styles ONLY.\nâ€¢ Sort jobs by `match_score` DESCENDING (10 â†’ 1).\nâ€¢ Decode any HTML entities in the source text.\nâ€¢ **LAYOUT STRATEGY**: Use `inline-block` for layout (Gmail safe). Do not use Flexbox.\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nROOT CONTAINER\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n<!-- font-size:0 removes whitespace between inline-blocks. text-align:center centers the cards. -->\n<div style=\"font-family:Arial,Helvetica,sans-serif;font-size:0;text-align:center;background-color:#ffffff;\">\n\n(Each Job Card represents one item in the input array)\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nJOB CARD CONTAINER\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n<!-- \n  display:inline-block allows side-by-side. \n  min-width:280px forces the card to wrap to a new line on mobile screens.\n  font-size:14px restores text size (since parent is 0).\n  text-align:left resets alignment (since parent is center).\n-->\n<div style=\"display:inline-block;vertical-align:top;width:46%;min-width:280px;margin:10px;text-align:left;font-size:14px;background:#f9f9f9;border-radius:12px;padding:28px 20px 20px 20px;position:relative;border:1px solid #e6e6e6;box-sizing:border-box;\">\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nELEMENT: TOP MATCH LABEL\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nCONDITION: Render this div ONLY if `match_score` is equal to 10.\nSTYLE:\n<div style=\"background:#0b8043;color:#ffffff;padding:4px 8px;border-radius:6px;font-size:11px;font-weight:bold;letter-spacing:0.4px;display:inline-block;\">\nTOP MATCH\n</div>\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nELEMENT: MATCH SCORE BADGE\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDATA: **match_score**\nSTYLE:\n<div style=\"margin-top:-40px;margin-right:-5px;background:#1a73e8;color:#ffffff;width:60px;height:60px;line-height:64px;text-align:center;border-radius:999px;font-weight:bold;font-size:30px;float:right;box-shadow:0 4px 10px rgba(26,115,232,0.35);\">\n**match_score**\n</div>\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nELEMENT: HEADER\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDATA: **job_title** and **company**\nSTYLE:\n<div style=\"margin-top:6px;\">\n<div style=\"font-size:18px;font-weight:bold;color:#202124;line-height:1.4;\">\n**job_title**\n</div>\n<div style=\"font-size:14px;color:#5f6368;margin-top:4px;\">\n**company**\n</div>\n</div>\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nELEMENT: METADATA TAGS\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDATA: **employment_type** and **remote**\nSTYLE:\n<div style=\"margin-top:10px;\">\n<span style=\"font-size:13px;background:#f1f3f4;padding:4px 8px;border-radius:6px;color:#5f6368;display:inline-block;\">\nEmployment Type: **employment_type**\n</span>\n</div>\n<div style=\"margin-top:6px;\">\n<span style=\"font-size:13px;background:#f1f3f4;padding:4px 8px;border-radius:6px;color:#5f6368;display:inline-block;\">\nRemote: **remote**\n</span>\n</div>\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nELEMENT: SALARY\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDATA: **salary**\nSTYLE:\n<div style=\"margin-top:10px;display:inline-block;background:#e6f4ea;color:#0b8043;padding:6px 10px;border-radius:6px;font-weight:bold;font-size:14px;\">\nðŸ’° **salary**\n</div>\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nELEMENT: LIST SECTIONS (Responsibilities, Qualifications, Benefits)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nINSTRUCTIONS:\n1. For 'responsibilities', 'qualifications', and 'benefits'.\n2. The input is a string separated by newlines (\\n) or semicolons (;). Split them into individual items.\n3. Render every item found.\n\nHEADER STYLE:\n<div style=\"font-size:14px;font-weight:bold;margin-top:16px;\">\nResponsibilities\n</div>\n\nLIST STYLE:\n<ul style=\"margin-top:8px;padding-left:18px;margin-bottom:0;\">\n<li>**Item 1**</li>\n<li>**Item 2**</li>\n</ul>\n\n(Repeat this pattern for Qualifications and Benefits headers/lists)\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nELEMENT: MATCH REASON\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDATA: **match_reason**\nSTYLE:\n<div style=\"margin-top:14px;background:#eef3fd;padding:12px;border-radius:8px;font-size:13px;line-height:1.5;\">\n<strong>Why this matches you:</strong><br/>\n**match_reason**\n</div>\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nELEMENT: APPLY BUTTONS\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDATA: **apply_link**\nINSTRUCTIONS:\nThe input `apply_link` is a string containing HTML anchors (e.g., `<a href=\"...\">Title</a>`).\n1. Regex/Parse the input to extract the URL (href) and the Label (text content) for EACH link.\n2. Create a button for EACH extracted link.\n\nCONTAINER (No Flexbox - use standard block flow):\n<div style=\"margin-top:18px;\">\n\nBUTTON STYLE:\n<a href=\"**extracted_url**\" style=\"display:inline-block;padding:10px 16px;background:#1a73e8;color:#ffffff;text-decoration:none;border-radius:6px;font-weight:bold;font-size:14px;white-space:nowrap;margin-right:10px;margin-bottom:10px;\">\n**extracted_label**\n</a>\n\n</div>\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nCLOSING TAGS\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nClose the job card div.\nClose the root container div after all jobs are rendered."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1424,
        464
      ],
      "id": "52304aec-60b1-4bbd-bcb2-7222dea65144",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "model": "mistral-small-latest",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
      "typeVersion": 1,
      "position": [
        1424,
        656
      ],
      "id": "f2fe8615-76ef-46a5-8276-df7e4f5d3036",
      "name": "Mistral Cloud Chat Model2",
      "credentials": {
        "mistralCloudApi": {
          "id": "dcFlASdzHKWzUend",
          "name": "Mistral Cloud account"
        }
      }
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "output.match_reason"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1104,
        864
      ],
      "id": "66e82e30-1158-4def-ad02-3f27644752c5",
      "name": "Aggregate1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.match_reason }}",
        "options": {
          "systemMessage": "=You are an AI career coach. You will receive a JSON array where each object contains a \"match_reason\" field â€” an array of text explaining why a candidate matches a job.\n\nYour task is to analyze these match reasons and produce output formatted in **HTML** suitable for an email body:\n\n**Areas to Improve:** A bullet list of specific skills, technologies, or knowledge the candidate should develop or strengthen to qualify for more job openings. Only include actionable items addressing skill gaps mentioned in the match reasons.\n\n**HTML Output Format:**\n\n<div style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.5; max-width: 600px; margin: auto; padding: 20px; background-color: #f9f9f9; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);\"> \n\n  <h2 style=\"color: #1a73e8; border-bottom: 2px solid #1a73e8; padding-bottom: 5px;\">Areas to Improve</h2>\n  <ul style=\"font-size: 16px; margin-top: 10px; padding-left: 20px;\">\n    <li>[Skill/technology/knowledge area 1]</li>\n    <li>[Skill/technology/knowledge area 2]</li>\n    <li>...</li>\n  </ul>\n\n</div>\n\n**Important:** \n- Do not include any extra commentary beyond the improvement list. \n- Use only the information provided in the match_reason fields.\n- Always output in HTML format exactly as specified.\n- Ensure the HTML is clean, readable, and can be used directly as an email body.\n- Output ONLY raw HTML"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1424,
        832
      ],
      "id": "fa5e0a63-f40d-4ce5-a07a-c31b0e6a32cc",
      "name": "AI Agent2"
    },
    {
      "parameters": {
        "model": "mistral-small-latest",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
      "typeVersion": 1,
      "position": [
        1424,
        1040
      ],
      "id": "31e11563-94a8-404c-bab6-6469106e8d6f",
      "name": "Mistral Cloud Chat Model3",
      "credentials": {
        "mistralCloudApi": {
          "id": "dcFlASdzHKWzUend",
          "name": "Mistral Cloud account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        1808,
        672
      ],
      "id": "0d28100a-c814-43ea-8c7f-7e519ee70b7e",
      "name": "Merge1"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        2016,
        672
      ],
      "id": "e39ddd21-9e99-4e6e-9a1d-e22a7976a9c8",
      "name": "Aggregate2"
    },
    {
      "parameters": {
        "sendTo": "fostanesmarkrenier@gmail.com",
        "subject": "Jobs Matching Your Skills",
        "message": "={{ $json.data[0].output }}\n<br/>\n{{ $json.data[1].output }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.2,
      "position": [
        2224,
        672
      ],
      "id": "0f374f27-a3d7-481d-bd16-ec9a6488b9d9",
      "name": "Send a message",
      "webhookId": "cbcdab67-a9d9-42d0-8a80-8c413feb85ae",
      "credentials": {
        "gmailOAuth2": {
          "id": "DGRffk6Ket7EW8fG",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        2432,
        672
      ],
      "id": "40f2b4c4-1207-4757-a4cf-0b681b512a64",
      "name": "Wait1",
      "webhookId": "a1677007-e20c-49bd-8880-8ced018c9de7"
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Download file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download file": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mistral Cloud Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Job Matcher",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mistral Cloud Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Job Matcher",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Job Matcher",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Job Matcher": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "If match score >= 7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If match score >= 7": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aggregate1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mistral Cloud Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate1": {
      "main": [
        [
          {
            "node": "AI Agent2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mistral Cloud Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent2": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Aggregate2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate2": {
      "main": [
        [
          {
            "node": "Send a message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a message": {
      "main": [
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "ace44c1d-75fc-4646-8efd-39b4a7259db7",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "4b63c75b0fec3465d13bb69406f03f4eb540a0d24755e9d2ef2518631a6baa75"
  },
  "id": "5SO91oeTlFdsrXp7enYPh",
  "tags": []
}